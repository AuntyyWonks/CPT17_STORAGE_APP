<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Storage - BYTEBOX</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header style="position: fixed; top: 0; width: 100%; padding: 15px; z-index: 2; display: flex; justify-content: space-between; align-items: center; background-color: rgba(0, 0, 0, 0.8);">
        <div style="color: #B0C4DE; font-size: 2em; font-weight: bold;"><a href="homeconsole.html" style="color: #B0C4DE; font-size: 1em; font-weight: bold;text-decoration: none">BYTEBOX</a></div>
        <div class="menu" style="display: flex; gap: 250px; align-items: center;">
            <div class="manage-booking" style="position: relative; cursor: pointer; color: #B0C4DE; font-size: x-small; font-weight: lighter;" onclick="toggleDropdown('manageDropdown')">
                Manage Booking
                <ul id="manageDropdown" class="dropdown-menu" style="display: none; position: absolute; top: 30px; right: 0; background-color: #292b2e; border: 1px solid #4C8DCC; border-radius: 4px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); list-style: none; padding: 10px;">
                    <li><a href="booking.html" style="text-decoration: none; color: #B0C4DE; padding: 10px; display: block;">Book Storage</a></li>
                    <li><a href="viewstorage.html" style="text-decoration: none; color: #B0C4DE; padding: 10px; display: block;">Cancel Storage</a></li>
                    <li><a href="viewstorage.html" style="text-decoration: none; color: #B0C4DE; padding: 10px; display: block;">View My Storage</a></li>
                    <li><a href="viewstorage.html" style="text-decoration: none; color: #B0C4DE; padding: 10px; display: block;">View All Storage</a></li>
                </ul>
            </div>
            <div><a href="aboutus.html" style="color: #B0C4DE; font-size: x-small;font-weight: lighter;text-decoration: none;">About Us</a></div>
            <div><a href="contactus.html" style="color: #B0C4DE; font-size: x-small;font-weight: lighter;text-decoration: none;">Contact Us</a></div>
            <div><a href="index.html" style="color: #B0C4DE; font-size: x-small;font-weight: lighter;text-decoration: none;">Log out</a></div>
        </div>

        <div class="profile-menu" style="position: relative;">
            <img src="profile-icon.png" alt="Profile Icon" style="width: 40px; height: 40px; border-radius: 50%; cursor: pointer;" onclick="toggleDropdown('profileDropdown')">
            <ul id="profileDropdown" class="dropdown-menu" style="display: none; position: absolute; top: 50px; right: 0; background-color: #292b2e; border: 1px solid #4C8DCC; border-radius: 4px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); list-style: none; padding: 10px;">
                <li><a href="#" style="text-decoration: none; color: #B0C4DE; padding: 10px; display: block;">Account</a></li>
                <li><a href="#" style="text-decoration: none; color: #B0C4DE; padding: 10px; display: block;">Billing</a></li>
                <li><a href="#" style="text-decoration: none; color: #B0C4DE; padding: 10px; display: block;">Settings</a></li>
                <li><a href="#" style="text-decoration: none; color: #B0C4DE; padding: 10px; display: block;">Logout</a></li>
            </ul>
        </div>
    </header>

    <main> 
        <br><br>
        <br><br>
        <h1>Book Your Storage</h1>
        <p>Choose a storage size, payment method, and billing options below.</p>

        <form id="bookingForm" onsubmit="handleBookingSubmit(event)" style="max-width: 600px; margin: 0 auto;">
            <!-- Section for selecting the town -->
            <label for="town" style="color: white;">Select Town to Book:</label>
            <select id="town" name="town">
              <option value="CPT">Cape Town</option>
              <option value="DBN">Durban</option>
            </select>
            <br><br>

        
          
            <!-- Pricing Boxes -->
            <div class="pricing-boxes" style="display: flex; justify-content: space-between; gap: 20px;">
                <div class="storage-size-box" onclick="selectStorageSize(event)" id="smallBox" style="padding: 10px; border: 1px solid #4C8DCC; border-radius: 4px; background-color: #292b2e; color: #B0C4DE; flex: 1;">
                    <h3>Small - 5m²</h3>
                    <p>Price: R100/month</p>
                    <p class="discount" id="smallDiscount"></p>
                </div>
                <div class="storage-size-box" onclick="selectStorageSize(event)" id="mediumBox" style="padding: 10px; border: 1px solid #4C8DCC; border-radius: 4px; background-color: #292b2e; color: #B0C4DE; flex: 1;">                    
                    <h3>Medium - 10m²</h3>
                    <p>Price: R200/month</p>
                    <p class="discount" id="mediumDiscount"></p>
                </div>
                <div class="storage-size-box" onclick="selectStorageSize(event)" id="largeBox" style="padding: 10px; border: 1px solid #4C8DCC; border-radius: 4px; background-color: #292b2e; color: #B0C4DE; flex: 1;">   
                    <h3>Large - 20m²</h3>
                    <p>Price: R400/month</p>
                    <p class="discount" id="largeDiscount"></p>
                </div>
            </div>
            <script>
                function selectStorageSize(event) {
                    // Reset all discounts
                    const discounts = document.querySelectorAll('.discount');
                    discounts.forEach(discount => discount.innerText = '');
            
            
                    const festiveSeason = true; 
                    const yearlyBilling = true; 
            
                    let discountPercentage = 0;
            
                    // Assign discount based on storage size
                    const clickedBox = event.currentTarget;
                    const discountElement = clickedBox.querySelector('.discount');
            
                    if (clickedBox.id === 'smallBox') {
                        sessionStorage.setItem("unitSize", "small")
                        discountPercentage = "R90/month"
                    } else if (clickedBox.id === 'mediumBox') {
                        sessionStorage.setItem("unitSize", "medium")
                        discountPercentage = "R180/month"
                    } else if (clickedBox.id === 'largeBox') {
                        sessionStorage.setItem("unitSize", "large")
                        discountPercentage = "R360/month"
                    }
            
                    // the discount message
                    discountElement.innerText = `Festive Discount: ${discountPercentage} (10% off for yearly billing)`;
                }
            </script>
            

    
            <!-- Payment Method Selection -->
            <div class="form-section" onsubmit="handleBookingSubmit(event)">
                <label for="paymentMethod" style="color: white;">Choose Payment Method</label>
                <div class="payment-methods">
                    <!-- Mastercard Button -->
                    <div class="payment-option" onclick="selectPaymentMethod('mastercard')">
                        <input type="radio" name="paymentMethod" id="mastercard" value="mastercard">
                        <label for="mastercard">Mastercard</label>
                    </div>

                    <!-- Visa Button -->
                    <div class="payment-option" onclick="selectPaymentMethod('visa')">
                        <input type="radio" name="paymentMethod" id="visa" value="visa">
                        <label for="visa">Visa</label>
                    </div>

                    <!-- Snapscan Button -->
                    <div class="payment-option" onclick="selectPaymentMethod('snapscan')">
                        <input type="radio" name="paymentMethod" id="snapscan" value="snapscan">
                        <label for="snapscan">Snapscan</label>
                    </div>
                </div>
            </div>

            <!-- Payment Method Sections -->
            <div id="mastercardSection" class="payment-method-section">
                <h3>Enter Your Mastercard Details</h3>
                <input type="text" id="cardNumber" placeholder="Card Number" pattern="\d{16}" maxlength="16">
                <input type="text" id="expiryDate" placeholder="Expiry Date (MM/YY)" pattern="^(0[1-9]|1[0-2])\/([0-9]{2})$" maxlength="5">
                <input type="text" id="cvv" placeholder="CVV" pattern="\d{3}" maxlength="3">
            </div>

            <!-- Visa Section -->
            <div id="visaSection" class="payment-method-section">
                <h3>Enter Your Visa Details</h3>
                <input type="text" id="visaCardNumber" placeholder="Card Number" pattern="\d{16}" maxlength="16">
                <input type="text" id="visaExpiryDate" placeholder="Expiry Date (MM/YY)" pattern="^(0[1-9]|1[0-2])\/([0-9]{2})$" maxlength="5">
                <input type="text" id="visaCvv" placeholder="CVV" pattern="\d{3}" maxlength="3">
            </div>

            <!-- Snapscan Section -->
            <div id="snapscanSection" class="payment-method-section">
                <h3>Enter Your SnapScan Details</h3>
                <input type="text" id="snapscanCardNumber" placeholder="Card Number" pattern="\d{16}" maxlength="16">
            </div>

            <!-- Submit Button -->
            <div class="form-section">
                <button type="submit" class="button">Checkout</button>
            </div>
        </form>

        <div id="error-message"></div>

        <!-- Popup Confirmation -->
        <div id="popupMessage" class="popup">
            <p>Booking Confirmed! Your message has been sent.</p>
            <button onclick="closePopup()">Close</button>
        </div>
    </main>

    <script>
        function updatePricing() {
            const storageSize = document.getElementById('storageSize').value;
            const festiveSeason = true;

            // Hide all discounts initially
            document.getElementById('smallStorageDiscount').style.display = 'none';
            document.getElementById('mediumStorageDiscount').style.display = 'none';
            document.getElementById('largeStorageDiscount').style.display = 'none';

            // Show the discount for selected storage size
            if (festiveSeason) {
                if (storageSize === 'small') {
                    document.getElementById('smallStorageDiscount').style.display = 'block';
                } else if (storageSize === 'medium') {
                    document.getElementById('mediumStorageDiscount').style.display = 'block';
                } else if (storageSize === 'large') {
                    document.getElementById('largeStorageDiscount').style.display = 'block';
                }
            }
        }
        function selectPaymentMethod(paymentMethod) {
            document.getElementById('mastercardSection').style.display = 'none';
            document.getElementById('visaSection').style.display = 'none';
            document.getElementById('snapscanSection').style.display = 'none';

            if (paymentMethod === 'mastercard') {
                document.getElementById('mastercardSection').style.display = 'block';
            } else if (paymentMethod === 'visa') {
                document.getElementById('visaSection').style.display = 'block';
            } else if (paymentMethod === 'snapscan') {
                document.getElementById('snapscanSection').style.display = 'block';
            }
        }


        function handleBookingSubmit(event) {
            event.preventDefault();

            // Show the popup after submitting the form
            document.getElementById('popupMessage').style.display = 'block';
            
        }

        function closePopup() {
            document.getElementById('popupMessage').style.display = 'none';
            // window.location.href = 'homeconsole.html';
        }
    </script>
    <script src="js/booking.js"></script>
</body>
</html>
